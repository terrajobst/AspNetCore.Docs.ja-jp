---
title: ASP.NET Core Blazor ã‚¢ãƒ—ãƒªã§ã®ã‚¨ãƒ©ãƒ¼ã®å‡¦ç†
author: guardrex
description: Blazor ã§ãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œãªã„ä¾‹å¤–ã‚’ç®¡ç†ã™ã‚‹æ–¹æ³•ã€ãŠã‚ˆã³ã‚¨ãƒ©ãƒ¼ã‚’æ¤œå‡ºã—ã¦å‡¦ç†ã™ã‚‹ã‚¢ãƒ—ãƒªã‚’é–‹ç™ºã™ã‚‹æ–¹æ³•ã‚’ ASP.NET Core Blazor æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚
monikerRange: '>= aspnetcore-3.1'
ms.author: riande
ms.custom: mvc
ms.date: 12/18/2019
no-loc:
- Blazor
- SignalR
uid: blazor/handle-errors
ms.openlocfilehash: fe4cc13b1efb8c70c9632f032626aa938fb65ea3
ms.sourcegitcommit: 9ee99300a48c810ca6fd4f7700cd95c3ccb85972
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/17/2020
ms.locfileid: "76159951"
---
# <a name="handle-errors-in-aspnet-core-opno-locblazor-apps"></a><span data-ttu-id="b0e7c-103">ASP.NET Core Blazor ã‚¢ãƒ—ãƒªã§ã®ã‚¨ãƒ©ãƒ¼ã®å‡¦ç†</span><span class="sxs-lookup"><span data-stu-id="b0e7c-103">Handle errors in ASP.NET Core Blazor apps</span></span>

<span data-ttu-id="b0e7c-104">ä½œæˆè€…: [Steve Sanderson](https://github.com/SteveSandersonMS)</span><span class="sxs-lookup"><span data-stu-id="b0e7c-104">By [Steve Sanderson](https://github.com/SteveSandersonMS)</span></span>

<span data-ttu-id="b0e7c-105">ã“ã®è¨˜äº‹ã§ã¯ã€Blazor ãŒãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œãªã„ä¾‹å¤–ã‚’ç®¡ç†ã™ã‚‹æ–¹æ³•ã¨ã€ã‚¨ãƒ©ãƒ¼ã‚’æ¤œå‡ºã—ã¦å‡¦ç†ã™ã‚‹ã‚¢ãƒ—ãƒªã‚’é–‹ç™ºã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-105">This article describes how Blazor manages unhandled exceptions and how to develop apps that detect and handle errors.</span></span>

## <a name="detailed-errors-during-development"></a><span data-ttu-id="b0e7c-106">é–‹ç™ºä¸­ã®è©³ç´°ãªã‚¨ãƒ©ãƒ¼</span><span class="sxs-lookup"><span data-stu-id="b0e7c-106">Detailed errors during development</span></span>

<span data-ttu-id="b0e7c-107">é–‹ç™ºä¸­ã« Blazor ã‚¢ãƒ—ãƒªãŒæ­£å¸¸ã«æ©Ÿèƒ½ã—ã¦ã„ãªã„å ´åˆã€ã‚¢ãƒ—ãƒªã‹ã‚‰ã®è©³ç´°ãªã‚¨ãƒ©ãƒ¼æƒ…å ±ã‚’å—ã‘å–ã‚‹ã“ã¨ã§ã€å•é¡Œã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¨ä¿®æ­£ã«å½¹ç«‹ã¡ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-107">When a Blazor app isn't functioning properly during development, receiving detailed error information from the app assists in troubleshooting and fixing the issue.</span></span> <span data-ttu-id="b0e7c-108">ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã¨ Blazor ã‚¢ãƒ—ãƒªã«ã‚ˆã£ã¦ç”»é¢ã®ä¸‹éƒ¨ã«é‡‘è‰²ã®ãƒãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-108">When an error occurs, Blazor apps display a gold bar at the bottom of the screen:</span></span>

* <span data-ttu-id="b0e7c-109">é–‹ç™ºä¸­ã¯ã€é‡‘è‰²ã®ãƒãƒ¼ã«ã‚ˆã£ã¦ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã€ãã“ã§ä¾‹å¤–ã‚’ç¢ºèªã§ãã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-109">During development, the gold bar directs you to the browser console, where you can see the exception.</span></span>
* <span data-ttu-id="b0e7c-110">å®Ÿç¨¼åƒç’°å¢ƒã§ã¯ã€é‡‘è‰²ã®ãƒãƒ¼ã«ã‚ˆã£ã¦ã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã“ã¨ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€šçŸ¥ã•ã‚Œã€ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã®æ›´æ–°ãŒæ¨å¥¨ã•ã‚Œã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-110">In production, the gold bar notifies the user that an error has occurred and recommends refreshing the browser.</span></span>

<span data-ttu-id="b0e7c-111">ã“ã®ã‚¨ãƒ©ãƒ¼å‡¦ç†ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹ã® UI ã¯ã€Blazor ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä¸€éƒ¨ã§ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-111">The UI for this error handling experience is part of the Blazor project templates.</span></span> <span data-ttu-id="b0e7c-112">Blazor WebAssembly ã§ã€ *wwwroot/index.html*ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-112">In a Blazor WebAssembly app, customize the experience in the *wwwroot/index.html* file:</span></span>

```html
<div id="blazor-error-ui">
    An unhandled error has occurred.
    <a href="" class="reload">Reload</a>
    <a class="dismiss">ğŸ—™</a>
</div>
```

<span data-ttu-id="b0e7c-113">Blazor Server ã‚¢ãƒ—ãƒªã§ã€ *Pages/_Host cshtml*ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-113">In a Blazor Server app, customize the experience in the *Pages/_Host.cshtml* file:</span></span>

```cshtml
<div id="blazor-error-ui">
    <environment include="Staging,Production">
        An error has occurred. This application may no longer respond until reloaded.
    </environment>
    <environment include="Development">
        An unhandled exception has occurred. See browser dev tools for details.
    </environment>
    <a href="" class="reload">Reload</a>
    <a class="dismiss">ğŸ—™</a>
</div>
```

<span data-ttu-id="b0e7c-114">`blazor-error-ui` è¦ç´ ã¯ã€Blazor ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«å«ã¾ã‚Œã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã«ã‚ˆã£ã¦éè¡¨ç¤ºã«ãªã‚Šã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã¨ãã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-114">The `blazor-error-ui` element is hidden by the styles included with the Blazor templates and then shown when an error occurs.</span></span>

## <a name="how-the-opno-locblazor-framework-reacts-to-unhandled-exceptions"></a><span data-ttu-id="b0e7c-115">Blazor ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œãªã„ä¾‹å¤–ã«ã©ã®ã‚ˆã†ã«åå¿œã™ã‚‹ã‹</span><span class="sxs-lookup"><span data-stu-id="b0e7c-115">How the Blazor framework reacts to unhandled exceptions</span></span>

Blazor<span data-ttu-id="b0e7c-116"> Server ã¯ã€ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«ãªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-116"> Server is a stateful framework.</span></span> <span data-ttu-id="b0e7c-117">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€ã‚¢ãƒ—ãƒªã‚’æ“ä½œã—ã¦ã„ã‚‹é–“ã€*å›ç·š*ã¨å‘¼ã°ã‚Œã‚‹ã‚µãƒ¼ãƒãƒ¼ã¸ã®æ¥ç¶šã‚’ç¶­æŒã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-117">While users interact with an app, they maintain a connection to the server known as a *circuit*.</span></span> <span data-ttu-id="b0e7c-118">å›ç·šã¯ã€ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«åŠ ãˆã¦ã€æ¬¡ã®ã‚ˆã†ãªçŠ¶æ…‹ã®ä»–ã®å¤šãã®å´é¢ã‚’ä¿æŒã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-118">The circuit holds active component instances, plus many other aspects of state, such as:</span></span>

* <span data-ttu-id="b0e7c-119">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æœ€æ–°ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å‡ºåŠ›ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-119">The most recent rendered output of components.</span></span>
* <span data-ttu-id="b0e7c-120">ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã®ã‚¤ãƒ™ãƒ³ãƒˆã«ã‚ˆã£ã¦ãƒˆãƒªã‚¬ãƒ¼ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€ç¾åœ¨ã®ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ãƒ‡ãƒªã‚²ãƒ¼ãƒˆã®ã‚»ãƒƒãƒˆã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-120">The current set of event-handling delegates that could be triggered by client-side events.</span></span>

<span data-ttu-id="b0e7c-121">ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¤‡æ•°ã®ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã‚¿ãƒ–ã§ã‚¢ãƒ—ãƒªã‚’é–‹ã„ãŸå ´åˆã€è¤‡æ•°ã®ç‹¬ç«‹ã—ãŸå›è·¯ãŒã‚ã‚Šã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-121">If a user opens the app in multiple browser tabs, they have multiple independent circuits.</span></span>

Blazor<span data-ttu-id="b0e7c-122"> ã¯ã€ã»ã¨ã‚“ã©ã®ãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œãªã„ä¾‹å¤–ã‚’ã€ç™ºç”Ÿã—ãŸå›ç·šã«ã¨ã£ã¦è‡´å‘½çš„ãªã‚‚ã®ã¨ã—ã¦æ‰±ã„ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-122"> treats most unhandled exceptions as fatal to the circuit where they occur.</span></span> <span data-ttu-id="b0e7c-123">ãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œãªã„ä¾‹å¤–ã«ã‚ˆã£ã¦å›ç·šãŒçµ‚äº†ã—ãŸå ´åˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯æ–°ã—ã„å›ç·šã‚’ä½œæˆã™ã‚‹ãŸã‚ã«ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã™ã‚‹ã ã‘ã§ã€ã‚¢ãƒ—ãƒªã¨ã®å¯¾è©±ã‚’ç¶šã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-123">If a circuit is terminated due to an unhandled exception, the user can only continue to interact with the app by reloading the page to create a new circuit.</span></span> <span data-ttu-id="b0e7c-124">ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¾ãŸã¯ä»–ã®ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã‚¿ãƒ–ã®å›ç·šã§ã‚ã‚‹ã€çµ‚äº†ã—ãŸå›è·¯ä»¥å¤–ã®å›è·¯ã¯å½±éŸ¿ã‚’å—ã‘ã¾ã›ã‚“ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-124">Circuits outside of the one that's terminated, which are circuits for other users or other browser tabs, aren't affected.</span></span> <span data-ttu-id="b0e7c-125">ã“ã®ã‚·ãƒŠãƒªã‚ªã¯ã€ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã—ãŸã‚¢ãƒ—ãƒªã‚’å†èµ·å‹•ã™ã‚‹å¿…è¦ãŒã‚ã‚‹&mdash;ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã«ä¼¼ã¦ã„ã¾ã™ãŒã€ä»–ã®ã‚¢ãƒ—ãƒªã¯å½±éŸ¿ã‚’å—ã‘ã¾ã›ã‚“ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-125">This scenario is similar to a desktop app that crashes&mdash;the crashed app must be restarted, but other apps aren't affected.</span></span>

<span data-ttu-id="b0e7c-126">æ¬¡ã®ç†ç”±ã«ã‚ˆã‚Šã€ãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œãªã„ä¾‹å¤–ãŒç™ºç”Ÿã—ãŸã¨ãã«å›ç·šãŒçµ‚äº†ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-126">A circuit is terminated when an unhandled exception occurs for the following reasons:</span></span>

* <span data-ttu-id="b0e7c-127">ãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œãªã„ä¾‹å¤–ãŒç™ºç”Ÿã™ã‚‹ã¨ã€å›ç·šãŒæœªå®šç¾©ã®çŠ¶æ…‹ã®ã¾ã¾ã«ãªã‚‹ã“ã¨ãŒã‚ˆãã‚ã‚Šã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-127">An unhandled exception often leaves the circuit in an undefined state.</span></span>
* <span data-ttu-id="b0e7c-128">æœªå‡¦ç†ã®ä¾‹å¤–ãŒç™ºç”Ÿã—ãŸå¾Œã¯ã€ã‚¢ãƒ—ãƒªã®é€šå¸¸ã®å‹•ä½œã‚’ä¿è¨¼ã§ãã¾ã›ã‚“ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-128">The app's normal operation can't be guaranteed after an unhandled exception.</span></span>
* <span data-ttu-id="b0e7c-129">å›ç·šãŒç¶™ç¶šã—ã¦ã„ã‚‹å ´åˆã¯ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®è„†å¼±æ€§ãŒã‚¢ãƒ—ãƒªã«è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-129">Security vulnerabilities may appear in the app if the circuit continues.</span></span>

## <a name="manage-unhandled-exceptions-in-developer-code"></a><span data-ttu-id="b0e7c-130">é–‹ç™ºè€…ã‚³ãƒ¼ãƒ‰ã§ãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œãªã„ä¾‹å¤–ã‚’ç®¡ç†ã™ã‚‹</span><span class="sxs-lookup"><span data-stu-id="b0e7c-130">Manage unhandled exceptions in developer code</span></span>

<span data-ttu-id="b0e7c-131">ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿå¾Œã‚‚ã‚¢ãƒ—ãƒªã‚’ç¶šè¡Œã™ã‚‹ã«ã¯ã€ã‚¢ãƒ—ãƒªã«ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯ãŒå¿…è¦ã§ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-131">For an app to continue after an error, the app must have error handling logic.</span></span> <span data-ttu-id="b0e7c-132">ã“ã®è¨˜äº‹ã®å¾Œã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€æœªå‡¦ç†ã®ä¾‹å¤–ã®æ½œåœ¨çš„ãªåŸå› ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-132">Later sections of this article describe potential sources of unhandled exceptions.</span></span>

<span data-ttu-id="b0e7c-133">å®Ÿç¨¼åƒç’°å¢ƒã§ã¯ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ä¾‹å¤–ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚„ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’ UI ã«è¡¨ç¤ºã—ã¾ã›ã‚“ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-133">In production, don't render framework exception messages or stack traces in the UI.</span></span> <span data-ttu-id="b0e7c-134">ä¾‹å¤–ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¾ãŸã¯ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’è¡¨ç¤ºã™ã‚‹ã¨ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-134">Rendering exception messages or stack traces could:</span></span>

* <span data-ttu-id="b0e7c-135">ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ©Ÿå¯†æƒ…å ±ã‚’é–‹ç¤ºã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-135">Disclose sensitive information to end users.</span></span>
* <span data-ttu-id="b0e7c-136">æ‚ªæ„ã®ã‚ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ãƒ—ãƒªã€ã‚µãƒ¼ãƒãƒ¼ã€ã¾ãŸã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’ä¾µå®³ã™ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹è„†å¼±æ€§ã‚’æ¤œå‡ºã™ã‚‹ã®ã‚’æ”¯æ´ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-136">Help a malicious user discover weaknesses in an app that can compromise the security of the app, server, or network.</span></span>

## <a name="log-errors-with-a-persistent-provider"></a><span data-ttu-id="b0e7c-137">æ°¸ç¶šçš„ãªãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã§ã‚¨ãƒ©ãƒ¼ã‚’ãƒ­ã‚°ã«è¨˜éŒ²ã™ã‚‹</span><span class="sxs-lookup"><span data-stu-id="b0e7c-137">Log errors with a persistent provider</span></span>

<span data-ttu-id="b0e7c-138">æœªå‡¦ç†ã®ä¾‹å¤–ãŒç™ºç”Ÿã—ãŸå ´åˆã€ä¾‹å¤–ã¯ã€ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ³ãƒ†ãƒŠãƒ¼ã«æ§‹æˆã•ã‚Œã¦ã„ã‚‹ <xref:Microsoft.Extensions.Logging.ILogger> ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«è¨˜éŒ²ã•ã‚Œã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-138">If an unhandled exception occurs, the exception is logged to <xref:Microsoft.Extensions.Logging.ILogger> instances configured in the service container.</span></span> <span data-ttu-id="b0e7c-139">æ—¢å®šã§ã¯ã€Blazor ã‚¢ãƒ—ãƒªã¯ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ã«è¨˜éŒ²ã•ã‚Œã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-139">By default, Blazor apps log to console output with the Console Logging Provider.</span></span> <span data-ttu-id="b0e7c-140">ãƒ­ã‚°ã‚µã‚¤ã‚ºã¨ãƒ­ã‚°ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç®¡ç†ã™ã‚‹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã€ã‚ˆã‚Šæ°¸ç¶šçš„ãªå ´æ‰€ã«ãƒ­ã‚°ã‚’è¨˜éŒ²ã™ã‚‹ã“ã¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-140">Consider logging to a more permanent location with a provider that manages log size and log rotation.</span></span> <span data-ttu-id="b0e7c-141">è©³ç´°ã«ã¤ã„ã¦ã¯ã€ã€Œ <xref:fundamentals/logging/index>ã€ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-141">For more information, see <xref:fundamentals/logging/index>.</span></span>

<span data-ttu-id="b0e7c-142">é–‹ç™ºä¸­ã€Blazor ã¯é€šå¸¸ã€ãƒ‡ãƒãƒƒã‚°ã‚’æ”¯æ´ã™ã‚‹ãŸã‚ã«ã€ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ä¾‹å¤–ã®å®Œå…¨ãªè©³ç´°æƒ…å ±ã‚’é€ä¿¡ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-142">During development, Blazor usually sends the full details of exceptions to the browser's console to aid in debugging.</span></span> <span data-ttu-id="b0e7c-143">é‹ç”¨ç’°å¢ƒã§ã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã®è©³ç´°ãªã‚¨ãƒ©ãƒ¼ã¯æ—¢å®šã§ç„¡åŠ¹ã«ãªã£ã¦ã„ã¾ã™ã€‚ã¤ã¾ã‚Šã€ã‚¨ãƒ©ãƒ¼ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«é€ä¿¡ã•ã‚Œã¾ã›ã‚“ãŒã€ä¾‹å¤–ã®å®Œå…¨ãªè©³ç´°ã¯å¼•ãç¶šãã‚µãƒ¼ãƒãƒ¼å´ã§ãƒ­ã‚°ã«è¨˜éŒ²ã•ã‚Œã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-143">In production, detailed errors in the browser's console are disabled by default, which means that errors aren't sent to clients but the exception's full details are still logged server-side.</span></span> <span data-ttu-id="b0e7c-144">è©³ç´°ã«ã¤ã„ã¦ã¯ã€ã€Œ <xref:fundamentals/error-handling>ã€ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-144">For more information, see <xref:fundamentals/error-handling>.</span></span>

<span data-ttu-id="b0e7c-145">ãƒ­ã‚°ã«è¨˜éŒ²ã™ã‚‹ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã¨ã€ãƒ­ã‚°ã«è¨˜éŒ²ã•ã‚Œã‚‹ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã®é‡å¤§åº¦ãƒ¬ãƒ™ãƒ«ã‚’æ±ºå®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-145">You must decide which incidents to log and the level of severity of logged incidents.</span></span> <span data-ttu-id="b0e7c-146">æ‚ªæ„ã®ã‚ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€æ„å›³çš„ã«ã‚¨ãƒ©ãƒ¼ã‚’ãƒˆãƒªã‚¬ãƒ¼ã§ãã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-146">Hostile users might be able to trigger errors deliberately.</span></span> <span data-ttu-id="b0e7c-147">ãŸã¨ãˆã°ã€è£½å“ã®è©³ç´°ã‚’è¡¨ç¤ºã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã® URL ã«ä¸æ˜ãª `ProductId` ãŒæŒ‡å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€ã‚¨ãƒ©ãƒ¼ã‹ã‚‰ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‚’ãƒ­ã‚°ã«è¨˜éŒ²ã—ãªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-147">For example, don't log an incident from an error where an unknown `ProductId` is supplied in the URL of a component that displays product details.</span></span> <span data-ttu-id="b0e7c-148">ã™ã¹ã¦ã®ã‚¨ãƒ©ãƒ¼ã‚’ã€ãƒ­ã‚°è¨˜éŒ²ã®é‡è¦åº¦ã®é«˜ã„ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã¨ã—ã¦å‡¦ç†ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-148">Not all errors should be treated as high-severity incidents for logging.</span></span>

## <a name="places-where-errors-may-occur"></a><span data-ttu-id="b0e7c-149">ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹å ´æ‰€</span><span class="sxs-lookup"><span data-stu-id="b0e7c-149">Places where errors may occur</span></span>

<span data-ttu-id="b0e7c-150">ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ã‚¢ãƒ—ãƒªã‚³ãƒ¼ãƒ‰ã¯ã€æ¬¡ã®ã„ãšã‚Œã‹ã®å ´æ‰€ã§ãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œãªã„ä¾‹å¤–ã‚’ãƒˆãƒªã‚¬ãƒ¼ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-150">Framework and app code may trigger unhandled exceptions in any of the following locations:</span></span>

* [<span data-ttu-id="b0e7c-151">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–</span><span class="sxs-lookup"><span data-stu-id="b0e7c-151">Component instantiation</span></span>](#component-instantiation)
* [<span data-ttu-id="b0e7c-152">ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ¡ã‚½ãƒƒãƒ‰</span><span class="sxs-lookup"><span data-stu-id="b0e7c-152">Lifecycle methods</span></span>](#lifecycle-methods)
* [<span data-ttu-id="b0e7c-153">ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯</span><span class="sxs-lookup"><span data-stu-id="b0e7c-153">Rendering logic</span></span>](#rendering-logic)
* [<span data-ttu-id="b0e7c-154">ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼</span><span class="sxs-lookup"><span data-stu-id="b0e7c-154">Event handlers</span></span>](#event-handlers)
* [<span data-ttu-id="b0e7c-155">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ç ´æ£„</span><span class="sxs-lookup"><span data-stu-id="b0e7c-155">Component disposal</span></span>](#component-disposal)
* [<span data-ttu-id="b0e7c-156">JavaScript ã®ç›¸äº’é‹ç”¨</span><span class="sxs-lookup"><span data-stu-id="b0e7c-156">JavaScript interop</span></span>](#javascript-interop)
* [<span data-ttu-id="b0e7c-157">ã‚µãƒ¼ã‚­ãƒƒãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼</span><span class="sxs-lookup"><span data-stu-id="b0e7c-157">Circuit handlers</span></span>](#circuit-handlers)
* [<span data-ttu-id="b0e7c-158">å›ç·šç ´æ£„</span><span class="sxs-lookup"><span data-stu-id="b0e7c-158">Circuit disposal</span></span>](#circuit-disposal)
* [<span data-ttu-id="b0e7c-159">ãƒ—ãƒª</span><span class="sxs-lookup"><span data-stu-id="b0e7c-159">Prerendering</span></span>](#prerendering)

<span data-ttu-id="b0e7c-160">ä¸Šè¨˜ã®ãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œãªã„ä¾‹å¤–ã«ã¤ã„ã¦ã¯ã€ã“ã®è¨˜äº‹ã®æ¬¡ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§èª¬æ˜ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-160">The preceding unhandled exceptions are described in the following sections of this article.</span></span>

### <a name="component-instantiation"></a><span data-ttu-id="b0e7c-161">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–</span><span class="sxs-lookup"><span data-stu-id="b0e7c-161">Component instantiation</span></span>

<span data-ttu-id="b0e7c-162">Blazor ãŒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã™ã‚‹å ´åˆ:</span><span class="sxs-lookup"><span data-stu-id="b0e7c-162">When Blazor creates an instance of a component:</span></span>

* <span data-ttu-id="b0e7c-163">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ãŒå‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-163">The component's constructor is invoked.</span></span>
* <span data-ttu-id="b0e7c-164">[`@inject`](xref:blazor/dependency-injection#request-a-service-in-a-component)ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã¾ãŸã¯[`[Inject]`](xref:blazor/dependency-injection#request-a-service-in-a-component)å±æ€§ã‚’ä½¿ç”¨ã—ã¦ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã«æ¸¡ã•ã‚Œã‚‹éã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ DI ã‚µãƒ¼ãƒ“ã‚¹ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ãŒå‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-164">The constructors of any non-singleton DI services supplied to the component's constructor via the [`@inject`](xref:blazor/dependency-injection#request-a-service-in-a-component) directive or the [`[Inject]`](xref:blazor/dependency-injection#request-a-service-in-a-component) attribute are invoked.</span></span> 

<span data-ttu-id="b0e7c-165">ä»»æ„ã® `[Inject]` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«å¯¾ã—ã¦å®Ÿè¡Œã•ã‚Œã‚‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã¾ãŸã¯ setter ãŒãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œãªã„ä¾‹å¤–ã‚’ã‚¹ãƒ­ãƒ¼ã™ã‚‹ã¨ã€å›ç·šãŒå¤±æ•—ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-165">A circuit fails when any executed constructor or a setter for any `[Inject]` property throws an unhandled exception.</span></span> <span data-ttu-id="b0e7c-166">ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã§ããªã„ãŸã‚ã€ä¾‹å¤–ã¯ fatal ã§ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-166">The exception is fatal because the framework can't instantiate the component.</span></span> <span data-ttu-id="b0e7c-167">ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã®ãƒ­ã‚¸ãƒƒã‚¯ã«ã‚ˆã£ã¦ä¾‹å¤–ãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹å ´åˆã€ã‚¢ãƒ—ãƒªã§ã¯ã€ã‚¨ãƒ©ãƒ¼å‡¦ç†ã¨ãƒ­ã‚°è¨˜éŒ²ã‚’å«ã‚€ [try-catch](/dotnet/csharp/language-reference/keywords/try-catch) ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¦ä¾‹å¤–ã‚’ãƒˆãƒ©ãƒƒãƒ—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-167">If constructor logic may throw exceptions, the app should trap the exceptions using a [try-catch](/dotnet/csharp/language-reference/keywords/try-catch) statement with error handling and logging.</span></span>

### <a name="lifecycle-methods"></a><span data-ttu-id="b0e7c-168">ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ« ãƒ¡ã‚½ãƒƒãƒ‰</span><span class="sxs-lookup"><span data-stu-id="b0e7c-168">Lifecycle methods</span></span>

<span data-ttu-id="b0e7c-169">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æœ‰åŠ¹æœŸé–“ä¸­ã€Blazor ã¯æ¬¡ã®[ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ¡ã‚½ãƒƒãƒ‰](xref:blazor/lifecycle)ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-169">During the lifetime of a component, Blazor invokes the following [lifecycle methods](xref:blazor/lifecycle):</span></span>

* `OnInitialized` / `OnInitializedAsync`
* `OnParametersSet` / `OnParametersSetAsync`
* `ShouldRender` / `ShouldRenderAsync`
* `OnAfterRender` / `OnAfterRenderAsync`

<span data-ttu-id="b0e7c-170">ã‚ã‚‹ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ¡ã‚½ãƒƒãƒ‰ãŒä¾‹å¤–ã‚’åŒæœŸçš„ã¾ãŸã¯éåŒæœŸçš„ã«ã‚¹ãƒ­ãƒ¼ã™ã‚‹å ´åˆã€ã“ã®ä¾‹å¤–ã¯å›ç·šã«ã¨ã£ã¦è‡´å‘½çš„ã§ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-170">If any lifecycle method throws an exception, synchronously or asynchronously, the exception is fatal to the circuit.</span></span> <span data-ttu-id="b0e7c-171">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ¡ã‚½ãƒƒãƒ‰ã®ã‚¨ãƒ©ãƒ¼ã«å¯¾å‡¦ã™ã‚‹ã«ã¯ã€ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¿½åŠ ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-171">For components to deal with errors in lifecycle methods, add error handling logic.</span></span>

<span data-ttu-id="b0e7c-172">æ¬¡ã®ä¾‹ã§ã¯ã€`OnParametersSetAsync` ãŒãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ã¦è£½å“ã‚’å–å¾—ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-172">In the following example where `OnParametersSetAsync` calls a method to obtain a product:</span></span>

* <span data-ttu-id="b0e7c-173">`ProductRepository.GetProductByIdAsync` ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚¹ãƒ­ãƒ¼ã•ã‚ŒãŸä¾‹å¤–ã¯ã€`try-catch` ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã«ã‚ˆã£ã¦å‡¦ç†ã•ã‚Œã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-173">An exception thrown in the `ProductRepository.GetProductByIdAsync` method is handled by a `try-catch` statement.</span></span>
* <span data-ttu-id="b0e7c-174">`catch` ãƒ–ãƒ­ãƒƒã‚¯ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-174">When the `catch` block is executed:</span></span>
  * <span data-ttu-id="b0e7c-175">`loadFailed` ã¯ `true`ã«è¨­å®šã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-175">`loadFailed` is set to `true`, which is used to display an error message to the user.</span></span>
  * <span data-ttu-id="b0e7c-176">ã‚¨ãƒ©ãƒ¼ãŒãƒ­ã‚°ã«è¨˜éŒ²ã•ã‚Œã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-176">The error is logged.</span></span>

[!code-razor[](handle-errors/samples_snapshot/3.x/product-details.razor?highlight=11,27-39)]

### <a name="rendering-logic"></a><span data-ttu-id="b0e7c-177">ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯</span><span class="sxs-lookup"><span data-stu-id="b0e7c-177">Rendering logic</span></span>

<span data-ttu-id="b0e7c-178">`.razor` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å†…ã®å®£è¨€ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã¯ã€`BuildRenderTree`ã¨C#å‘¼ã°ã‚Œã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚Œã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-178">The declarative markup in a `.razor` component file is compiled into a C# method called `BuildRenderTree`.</span></span> <span data-ttu-id="b0e7c-179">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ã¨ã€`BuildRenderTree` ãŒå®Ÿè¡Œã•ã‚Œã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚ŒãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è¦ç´ ã€ãƒ†ã‚­ã‚¹ãƒˆã€ãŠã‚ˆã³å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¨˜è¿°ã™ã‚‹ãƒ‡ãƒ¼ã‚¿æ§‹é€ ãŒæ§‹ç¯‰ã•ã‚Œã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-179">When a component renders, `BuildRenderTree` executes and builds up a data structure describing the elements, text, and child components of the rendered component.</span></span>

<span data-ttu-id="b0e7c-180">ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯ã¯ä¾‹å¤–ã‚’ã‚¹ãƒ­ãƒ¼ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-180">Rendering logic can throw an exception.</span></span> <span data-ttu-id="b0e7c-181">ã“ã®ã‚·ãƒŠãƒªã‚ªã®ä¾‹ã¯ã€`@someObject.PropertyName` ãŒè©•ä¾¡ã•ã‚Œã€`@someObject` ãŒ `null`å ´åˆã«ç™ºç”Ÿã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-181">An example of this scenario occurs when `@someObject.PropertyName` is evaluated but `@someObject` is `null`.</span></span> <span data-ttu-id="b0e7c-182">ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯ã«ã‚ˆã£ã¦ã‚¹ãƒ­ãƒ¼ã•ã‚ŒãŸæœªå‡¦ç†ã®ä¾‹å¤–ã¯ã€å›ç·šã«ã¨ã£ã¦è‡´å‘½çš„ã§ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-182">An unhandled exception thrown by rendering logic is fatal to the circuit.</span></span>

<span data-ttu-id="b0e7c-183">ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯ã§ null å‚ç…§ä¾‹å¤–ãŒç™ºç”Ÿã—ãªã„ã‚ˆã†ã«ã™ã‚‹ã«ã¯ã€ãã®ãƒ¡ãƒ³ãƒãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹å‰ã« `null` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç¢ºèªã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-183">To prevent a null reference exception in rendering logic, check for a `null` object before accessing its members.</span></span> <span data-ttu-id="b0e7c-184">æ¬¡ã®ä¾‹ã§ã¯ã€`person.Address` ãŒ `null`å ´åˆã€`person.Address` ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã¯ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã›ã‚“ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-184">In the following example, `person.Address` properties aren't accessed if `person.Address` is `null`:</span></span>

[!code-razor[](handle-errors/samples_snapshot/3.x/person-example.razor?highlight=1)]

<span data-ttu-id="b0e7c-185">ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€`person` ãŒ `null`ã§ãªã„ã“ã¨ã‚’å‰æã¨ã—ã¦ã„ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-185">The preceding code assumes that `person` isn't `null`.</span></span> <span data-ttu-id="b0e7c-186">å¤šãã®å ´åˆã€ã‚³ãƒ¼ãƒ‰ã®æ§‹é€ ã«ã‚ˆã£ã¦ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå­˜åœ¨ã™ã‚‹ã“ã¨ãŒä¿è¨¼ã•ã‚Œã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-186">Often, the structure of the code guarantees that an object exists at the time the component is rendered.</span></span> <span data-ttu-id="b0e7c-187">ãã®ã‚ˆã†ãªå ´åˆã¯ã€è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯ã§ `null` ã‚’ç¢ºèªã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-187">In those cases, it isn't necessary to check for `null` in rendering logic.</span></span> <span data-ttu-id="b0e7c-188">å‰ã®ä¾‹ã§ã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã•ã‚Œã‚‹ã¨ãã« `person` ãŒä½œæˆã•ã‚Œã‚‹ãŸã‚ã€`person` ãŒç¢ºå®Ÿã«å­˜åœ¨ã™ã‚‹ã“ã¨ãŒä¿è¨¼ã•ã‚Œã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-188">In the prior example, `person` might be guaranteed to exist because `person` is created when the component is instantiated.</span></span>

### <a name="event-handlers"></a><span data-ttu-id="b0e7c-189">ã‚¤ãƒ™ãƒ³ãƒˆ ãƒãƒ³ãƒ‰ãƒ©ãƒ¼</span><span class="sxs-lookup"><span data-stu-id="b0e7c-189">Event handlers</span></span>

<span data-ttu-id="b0e7c-190">ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã®ã‚³ãƒ¼ãƒ‰ã¯ã€æ¬¡C#ã‚’ä½¿ç”¨ã—ã¦ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒä½œæˆã•ã‚Œã‚‹ã¨ãã«ã€ã‚³ãƒ¼ãƒ‰ã®å‘¼ã³å‡ºã—ã‚’ãƒˆãƒªã‚¬ãƒ¼ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-190">Client-side code triggers invocations of C# code when event handlers are created using:</span></span>

* `@onclick`
* `@onchange`
* <span data-ttu-id="b0e7c-191">ãã®ä»–ã® `@on...` å±æ€§</span><span class="sxs-lookup"><span data-stu-id="b0e7c-191">Other `@on...` attributes</span></span>
* `@bind`

<span data-ttu-id="b0e7c-192">ã“ã‚Œã‚‰ã®ã‚·ãƒŠãƒªã‚ªã§ã¯ã€ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã«ã‚ˆã£ã¦ãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œãªã„ä¾‹å¤–ãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-192">Event handler code might throw an unhandled exception in these scenarios.</span></span>

<span data-ttu-id="b0e7c-193">ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œãªã„ä¾‹å¤–ã‚’ã‚¹ãƒ­ãƒ¼ã—ãŸå ´åˆ (ãŸã¨ãˆã°ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªãŒå¤±æ•—ã—ãŸå ´åˆ)ã€ãã®ä¾‹å¤–ã¯å›ç·šã«ã¨ã£ã¦è‡´å‘½çš„ã§ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-193">If an event handler throws an unhandled exception (for example, a database query fails), the exception is fatal to the circuit.</span></span> <span data-ttu-id="b0e7c-194">ã‚¢ãƒ—ãƒªãŒå¤–éƒ¨ã®ç†ç”±ã§å¤±æ•—ã™ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’å‘¼ã³å‡ºã—ãŸå ´åˆã¯ã€ã‚¨ãƒ©ãƒ¼å‡¦ç†ã¨ãƒ­ã‚°è¨˜éŒ²ã‚’å«ã‚€ [try-catch](/dotnet/csharp/language-reference/keywords/try-catch) ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¦ä¾‹å¤–ã‚’ãƒˆãƒ©ãƒƒãƒ—ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-194">If the app calls code that could fail for external reasons, trap exceptions using a [try-catch](/dotnet/csharp/language-reference/keywords/try-catch) statement with error handling and logging.</span></span>

<span data-ttu-id="b0e7c-195">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ¼ãƒ‰ã«ã‚ˆã£ã¦ä¾‹å¤–ãŒãƒˆãƒ©ãƒƒãƒ—ã•ã‚Œã¦å‡¦ç†ã•ã‚Œãªã„å ´åˆã¯ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«ã‚ˆã£ã¦ä¾‹å¤–ãŒãƒ­ã‚°ã«è¨˜éŒ²ã•ã‚Œã€å›ç·šãŒçµ‚äº†ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-195">If user code doesn't trap and handle the exception, the framework logs the exception and terminates the circuit.</span></span>

### <a name="component-disposal"></a><span data-ttu-id="b0e7c-196">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ç ´æ£„</span><span class="sxs-lookup"><span data-stu-id="b0e7c-196">Component disposal</span></span>

<span data-ttu-id="b0e7c-197">ãŸã¨ãˆã°ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåˆ¥ã®ãƒšãƒ¼ã‚¸ã«ç§»å‹•ã—ãŸãŸã‚ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒ UI ã‹ã‚‰å‰Šé™¤ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-197">A component may be removed from the UI, for example, because the user has navigated to another page.</span></span> <span data-ttu-id="b0e7c-198"><xref:System.IDisposable?displayProperty=fullName> ã‚’å®Ÿè£…ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒ UI ã‹ã‚‰å‰Šé™¤ã•ã‚Œã‚‹ã¨ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã® <xref:System.IDisposable.Dispose*> ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-198">When a component that implements <xref:System.IDisposable?displayProperty=fullName> is removed from the UI, the framework calls the component's <xref:System.IDisposable.Dispose*> method.</span></span> 

<span data-ttu-id="b0e7c-199">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã® `Dispose` ãƒ¡ã‚½ãƒƒãƒ‰ãŒãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œãªã„ä¾‹å¤–ã‚’ã‚¹ãƒ­ãƒ¼ã—ãŸå ´åˆã€ã“ã®ä¾‹å¤–ã¯å›ç·šã«ã¨ã£ã¦è‡´å‘½çš„ã§ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-199">If the component's `Dispose` method throws an unhandled exception, the exception is fatal to the circuit.</span></span> <span data-ttu-id="b0e7c-200">ç ´æ£„ãƒ­ã‚¸ãƒƒã‚¯ã«ã‚ˆã£ã¦ä¾‹å¤–ãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹å ´åˆã€ã‚¢ãƒ—ãƒªã§ã¯ã€ã‚¨ãƒ©ãƒ¼å‡¦ç†ã¨ãƒ­ã‚°è¨˜éŒ²ã‚’å«ã‚€ [try-catch ](/dotnet/csharp/language-reference/keywords/try-catch)ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¦ä¾‹å¤–ã‚’ãƒˆãƒ©ãƒƒãƒ—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-200">If disposal logic may throw exceptions, the app should trap the exceptions using a [try-catch](/dotnet/csharp/language-reference/keywords/try-catch) statement with error handling and logging.</span></span>

<span data-ttu-id="b0e7c-201">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ç ´æ£„ã®è©³ç´°ã«ã¤ã„ã¦ã¯ã€ã€Œ<xref:blazor/lifecycle#component-disposal-with-idisposable>ã€ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-201">For more information on component disposal, see <xref:blazor/lifecycle#component-disposal-with-idisposable>.</span></span>

### <a name="javascript-interop"></a><span data-ttu-id="b0e7c-202">JavaScript ç›¸äº’é‹ç”¨</span><span class="sxs-lookup"><span data-stu-id="b0e7c-202">JavaScript interop</span></span>

<span data-ttu-id="b0e7c-203">`IJSRuntime.InvokeAsync<T>` ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€.NET ã‚³ãƒ¼ãƒ‰ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã§ JavaScript ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¸ã®éåŒæœŸå‘¼ã³å‡ºã—ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-203">`IJSRuntime.InvokeAsync<T>` allows .NET code to make asynchronous calls to the JavaScript runtime in the user's browser.</span></span>

<span data-ttu-id="b0e7c-204">`InvokeAsync<T>`ã§ã®ã‚¨ãƒ©ãƒ¼å‡¦ç†ã«ã¯ã€æ¬¡ã®æ¡ä»¶ãŒé©ç”¨ã•ã‚Œã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-204">The following conditions apply to error handling with `InvokeAsync<T>`:</span></span>

* <span data-ttu-id="b0e7c-205">`InvokeAsync<T>` ã®å‘¼ã³å‡ºã—ãŒåŒæœŸçš„ã«å¤±æ•—ã—ãŸå ´åˆã€.NET ä¾‹å¤–ãŒç™ºç”Ÿã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-205">If a call to `InvokeAsync<T>` fails synchronously, a .NET exception occurs.</span></span> <span data-ttu-id="b0e7c-206">ãŸã¨ãˆã°ã€æŒ‡å®šã•ã‚ŒãŸå¼•æ•°ã‚’ã‚·ãƒªã‚¢ãƒ«åŒ–ã§ããªã„ãŸã‚ã€`InvokeAsync<T>` ã‚’å‘¼ã³å‡ºã™ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-206">A call to `InvokeAsync<T>` may fail, for example, because the supplied arguments can't be serialized.</span></span> <span data-ttu-id="b0e7c-207">é–‹ç™ºè€…ã‚³ãƒ¼ãƒ‰ã¯ä¾‹å¤–ã‚’ã‚­ãƒ£ãƒƒãƒã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-207">Developer code must catch the exception.</span></span> <span data-ttu-id="b0e7c-208">ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã¾ãŸã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ¡ã‚½ãƒƒãƒ‰ã®ã‚¢ãƒ—ãƒªã‚³ãƒ¼ãƒ‰ã§ä¾‹å¤–ãŒå‡¦ç†ã•ã‚Œãªã„å ´åˆã€çµæœã¨ã—ã¦å¾—ã‚‰ã‚Œã‚‹ä¾‹å¤–ã¯å›ç·šã«ã¨ã£ã¦è‡´å‘½çš„ã§ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-208">If app code in an event handler or component lifecycle method doesn't handle an exception, the resulting exception is fatal to the circuit.</span></span>
* <span data-ttu-id="b0e7c-209">`InvokeAsync<T>` ã®å‘¼ã³å‡ºã—ãŒéåŒæœŸã«å¤±æ•—ã—ãŸå ´åˆã€.NET <xref:System.Threading.Tasks.Task> ã¯å¤±æ•—ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-209">If a call to `InvokeAsync<T>` fails asynchronously, the .NET <xref:System.Threading.Tasks.Task> fails.</span></span> <span data-ttu-id="b0e7c-210">ãŸã¨ãˆã°ã€JavaScript å´ã®ã‚³ãƒ¼ãƒ‰ãŒä¾‹å¤–ã‚’ã‚¹ãƒ­ãƒ¼ã—ãŸã‚Šã€`rejected`ã¨ã—ã¦å®Œäº†ã—ãŸ `Promise` ã‚’è¿”ã—ãŸã‚Šã™ã‚‹ãŸã‚ã«ã€`InvokeAsync<T>` ã®å‘¼ã³å‡ºã—ãŒå¤±æ•—ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-210">A call to `InvokeAsync<T>` may fail, for example, because the JavaScript-side code throws an exception or returns a `Promise` that completed as `rejected`.</span></span> <span data-ttu-id="b0e7c-211">é–‹ç™ºè€…ã‚³ãƒ¼ãƒ‰ã¯ä¾‹å¤–ã‚’ã‚­ãƒ£ãƒƒãƒã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-211">Developer code must catch the exception.</span></span> <span data-ttu-id="b0e7c-212">[Await](/dotnet/csharp/language-reference/keywords/await)æ¼”ç®—å­ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€ã‚¨ãƒ©ãƒ¼å‡¦ç†ã¨ãƒ­ã‚°è¨˜éŒ²ã‚’ä½¿ç”¨ã—[ã¦ã€try-catch](/dotnet/csharp/language-reference/keywords/try-catch)ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã§ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—ã‚’ãƒ©ãƒƒãƒ—ã™ã‚‹ã“ã¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-212">If using the [await](/dotnet/csharp/language-reference/keywords/await) operator, consider wrapping the method call in a [try-catch](/dotnet/csharp/language-reference/keywords/try-catch) statement with error handling and logging.</span></span> <span data-ttu-id="b0e7c-213">ãã‚Œä»¥å¤–ã®å ´åˆã€å¤±æ•—ã—ãŸã‚³ãƒ¼ãƒ‰ã¯ã€å›è·¯ã«ã¨ã£ã¦è‡´å‘½çš„ãªæœªå‡¦ç†ã®ä¾‹å¤–ã‚’ç™ºç”Ÿã•ã›ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-213">Otherwise, the failing code results in an unhandled exception that's fatal to the circuit.</span></span>
* <span data-ttu-id="b0e7c-214">æ—¢å®šã§ã¯ã€`InvokeAsync<T>` ã®å‘¼ã³å‡ºã—ã¯ç‰¹å®šã®æœŸé–“å†…ã«å®Œäº†ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãã†ã§ãªã„å ´åˆã¯ã€å‘¼ã³å‡ºã—ãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã™ã€‚æ—¢å®šã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæœŸé–“ã¯1åˆ†ã§ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-214">By default, calls to `InvokeAsync<T>` must complete within a certain period or else the call times out. The default timeout period is one minute.</span></span> <span data-ttu-id="b0e7c-215">ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã¯ã€å®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ä¿¡ã—ãªã„ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã¾ãŸã¯ JavaScript ã‚³ãƒ¼ãƒ‰ã®æå¤±ã‹ã‚‰ã‚³ãƒ¼ãƒ‰ã‚’ä¿è­·ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-215">The timeout protects the code against a loss in network connectivity or JavaScript code that never sends back a completion message.</span></span> <span data-ttu-id="b0e7c-216">å‘¼ã³å‡ºã—ãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ãŸå ´åˆã€çµæœã¨ã—ã¦å¾—ã‚‰ã‚Œã‚‹ `Task` ã¯ <xref:System.OperationCanceledException>ã§å¤±æ•—ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-216">If the call times out, the resulting `Task` fails with an <xref:System.OperationCanceledException>.</span></span> <span data-ttu-id="b0e7c-217">ãƒ­ã‚°è¨˜éŒ²ã§ä¾‹å¤–ã‚’ãƒˆãƒ©ãƒƒãƒ—ã—ã¦å‡¦ç†ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-217">Trap and process the exception with logging.</span></span>

<span data-ttu-id="b0e7c-218">åŒæ§˜ã«ã€JavaScript ã‚³ãƒ¼ãƒ‰ã§ã¯ã€ [`[JSInvokable]`](xref:blazor/javascript-interop#invoke-net-methods-from-javascript-functions)å±æ€§ã«ã‚ˆã£ã¦ç¤ºã•ã‚Œã‚‹ .net ãƒ¡ã‚½ãƒƒãƒ‰ã®å‘¼ã³å‡ºã—ã‚’é–‹å§‹ã§ãã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-218">Similarly, JavaScript code may initiate calls to .NET methods indicated by the [`[JSInvokable]`](xref:blazor/javascript-interop#invoke-net-methods-from-javascript-functions) attribute.</span></span> <span data-ttu-id="b0e7c-219">ã“ã‚Œã‚‰ã® .NET ãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œãªã„ä¾‹å¤–ãŒã‚¹ãƒ­ãƒ¼ã•ã‚ŒãŸå ´åˆ:</span><span class="sxs-lookup"><span data-stu-id="b0e7c-219">If these .NET methods throw an unhandled exception:</span></span>

* <span data-ttu-id="b0e7c-220">ã“ã®ä¾‹å¤–ã¯ã€å›ç·šã«ã¨ã£ã¦è‡´å‘½çš„ãªä¾‹å¤–ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã›ã‚“ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-220">The exception isn't treated as fatal to the circuit.</span></span>
* <span data-ttu-id="b0e7c-221">JavaScript å´ã® `Promise` ã¯æ‹’å¦ã•ã‚Œã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-221">The JavaScript-side `Promise` is rejected.</span></span>

<span data-ttu-id="b0e7c-222">.NET å´ã¾ãŸã¯ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—ã® JavaScript å´ã§ã‚¨ãƒ©ãƒ¼å‡¦ç†ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-222">You have the option of using error handling code on either the .NET side or the JavaScript side of the method call.</span></span>

<span data-ttu-id="b0e7c-223">è©³ç´°ã«ã¤ã„ã¦ã¯ã€ã€Œ <xref:blazor/javascript-interop>ã€ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-223">For more information, see <xref:blazor/javascript-interop>.</span></span>

### <a name="circuit-handlers"></a><span data-ttu-id="b0e7c-224">ã‚µãƒ¼ã‚­ãƒƒãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼</span><span class="sxs-lookup"><span data-stu-id="b0e7c-224">Circuit handlers</span></span>

Blazor<span data-ttu-id="b0e7c-225"> ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ã‚³ãƒ¼ãƒ‰ã§*ã‚µãƒ¼ã‚­ãƒƒãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼*ã‚’å®šç¾©ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å›ç·šã®çŠ¶æ…‹ãŒå¤‰åŒ–ã—ãŸã¨ãã«é€šçŸ¥ã‚’å—ã‘å–ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-225"> allows code to define a *circuit handler*, which receives notifications when the state of a user's circuit changes.</span></span> <span data-ttu-id="b0e7c-226">æ¬¡ã®çŠ¶æ…‹ãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-226">The following states are used:</span></span>

* `initialized`
* `connected`
* `disconnected`
* `disposed`

<span data-ttu-id="b0e7c-227">é€šçŸ¥ã¯ã€`CircuitHandler` æŠ½è±¡åŸºæœ¬ã‚¯ãƒ©ã‚¹ã‹ã‚‰ç¶™æ‰¿ã™ã‚‹ DI ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç™»éŒ²ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ç®¡ç†ã•ã‚Œã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-227">Notifications are managed by registering a DI service that inherits from the `CircuitHandler` abstract base class.</span></span>

<span data-ttu-id="b0e7c-228">ã‚«ã‚¹ã‚¿ãƒ ã‚µãƒ¼ã‚­ãƒƒãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œãªã„ä¾‹å¤–ã‚’ã‚¹ãƒ­ãƒ¼ã—ãŸå ´åˆã€ã“ã®ä¾‹å¤–ã¯å›ç·šã«ã¨ã£ã¦è‡´å‘½çš„ã§ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-228">If a custom circuit handler's methods throw an unhandled exception, the exception is fatal to the circuit.</span></span> <span data-ttu-id="b0e7c-229">ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®ã‚³ãƒ¼ãƒ‰ã¾ãŸã¯ãƒ¡ã‚½ãƒƒãƒ‰ã§ä¾‹å¤–ãŒè¨±å®¹ã•ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã«ã¯ã€ã‚¨ãƒ©ãƒ¼å‡¦ç†ã¨ãƒ­ã‚°è¨˜éŒ²ã‚’å«ã‚€1ã¤ã¾ãŸã¯è¤‡æ•°ã®[try-catch](/dotnet/csharp/language-reference/keywords/try-catch)ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã§ã‚³ãƒ¼ãƒ‰ã‚’ãƒ©ãƒƒãƒ—ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-229">To tolerate exceptions in a handler's code or called methods, wrap the code in one or more [try-catch](/dotnet/csharp/language-reference/keywords/try-catch) statements with error handling and logging.</span></span>

### <a name="circuit-disposal"></a><span data-ttu-id="b0e7c-230">å›ç·šç ´æ£„</span><span class="sxs-lookup"><span data-stu-id="b0e7c-230">Circuit disposal</span></span>

<span data-ttu-id="b0e7c-231">ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåˆ‡æ–­ã•ã‚Œã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒå›ç·šã®çŠ¶æ…‹ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã—ã¦ã„ã‚‹ãŸã‚ã«å›ç·šãŒçµ‚äº†ã™ã‚‹ã¨ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯å›ç·šã® DI ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ç ´æ£„ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-231">When a circuit ends because a user has disconnected and the framework is cleaning up the circuit state, the framework disposes of the circuit's DI scope.</span></span> <span data-ttu-id="b0e7c-232">ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ç ´æ£„ã™ã‚‹ã¨ã€<xref:System.IDisposable?displayProperty=fullName>ã‚’å®Ÿè£…ã™ã‚‹ã‚µãƒ¼ã‚­ãƒƒãƒˆã‚¹ã‚³ãƒ¼ãƒ—ã® DI ã‚µãƒ¼ãƒ“ã‚¹ãŒç ´æ£„ã•ã‚Œã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-232">Disposing the scope disposes any circuit-scoped DI services that implement <xref:System.IDisposable?displayProperty=fullName>.</span></span> <span data-ttu-id="b0e7c-233">ç ´æ£„ä¸­ã«ã„ãšã‚Œã‹ã® DI ã‚µãƒ¼ãƒ“ã‚¹ãŒãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œãªã„ä¾‹å¤–ã‚’ã‚¹ãƒ­ãƒ¼ã—ãŸå ´åˆã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯ä¾‹å¤–ã‚’ãƒ­ã‚°ã«è¨˜éŒ²ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-233">If any DI service throws an unhandled exception during disposal, the framework logs the exception.</span></span>

### <a name="prerendering"></a><span data-ttu-id="b0e7c-234">ãƒ—ãƒª</span><span class="sxs-lookup"><span data-stu-id="b0e7c-234">Prerendering</span></span>

Blazor<span data-ttu-id="b0e7c-235"> ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚ŒãŸ HTML ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åˆæœŸ HTTP è¦æ±‚ã®ä¸€éƒ¨ã¨ã—ã¦è¿”ã•ã‚Œã‚‹ã‚ˆã†ã«ã€`Component` ã‚¿ã‚°ãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ prerendered ã§ãã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-235"> components can be prerendered using the `Component` Tag Helper so that their rendered HTML markup is returned as part of the user's initial HTTP request.</span></span> <span data-ttu-id="b0e7c-236">ã“ã‚Œã¯æ¬¡ã®ã‚ˆã†ã«æ©Ÿèƒ½ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-236">This works by:</span></span>

* <span data-ttu-id="b0e7c-237">åŒã˜ãƒšãƒ¼ã‚¸ã«å«ã¾ã‚Œã‚‹ã™ã¹ã¦ã® prerendered ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å¯¾ã—ã¦æ–°ã—ã„å›ç·šã‚’ä½œæˆã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-237">Creating a new circuit for all of the prerendered components that are part of the same page.</span></span>
* <span data-ttu-id="b0e7c-238">åˆæœŸ HTML ã‚’ç”Ÿæˆã—ã¦ã„ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-238">Generating the initial HTML.</span></span>
* <span data-ttu-id="b0e7c-239">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ãŒåŒã˜ã‚µãƒ¼ãƒãƒ¼ã¸ã® SignalR æ¥ç¶šã‚’ç¢ºç«‹ã™ã‚‹ã¾ã§ã€å›ç·šã‚’ `disconnected` ã¨ã—ã¦æ‰±ã„ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-239">Treating the circuit as `disconnected` until the user's browser establishes a SignalR connection back to the same server.</span></span> <span data-ttu-id="b0e7c-240">æ¥ç¶šãŒç¢ºç«‹ã•ã‚Œã‚‹ã¨ã€å›ç·šã®å¯¾è©±æ©Ÿèƒ½ãŒå†é–‹ã•ã‚Œã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã® HTML ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ãŒæ›´æ–°ã•ã‚Œã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-240">When the connection is established, interactivity on the circuit is resumed and the components' HTML markup is updated.</span></span>

<span data-ttu-id="b0e7c-241">ãŸã¨ãˆã°ã€ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ¡ã‚½ãƒƒãƒ‰ã‚„ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯ã§ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã‚ˆã£ã¦å‡¦ç†ã•ã‚Œãªã„ä¾‹å¤–ãŒã‚¹ãƒ­ãƒ¼ã•ã‚ŒãŸå ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-241">If any component throws an unhandled exception during prerendering, for example, during a lifecycle method or in rendering logic:</span></span>

* <span data-ttu-id="b0e7c-242">ã“ã®ä¾‹å¤–ã¯ã€å›ç·šã«ã¨ã£ã¦è‡´å‘½çš„ã§ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-242">The exception is fatal to the circuit.</span></span>
* <span data-ttu-id="b0e7c-243">ä¾‹å¤–ã¯ã€`Component` ã‚¿ã‚°ãƒ˜ãƒ«ãƒ‘ãƒ¼ã‹ã‚‰ã®å‘¼ã³å‡ºã—å±¥æ­´ã«ã‚ˆã£ã¦ã‚¹ãƒ­ãƒ¼ã•ã‚Œã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-243">The exception is thrown up the call stack from the `Component` Tag Helper.</span></span> <span data-ttu-id="b0e7c-244">ã—ãŸãŒã£ã¦ã€ä¾‹å¤–ãŒé–‹ç™ºè€…ã‚³ãƒ¼ãƒ‰ã«ã‚ˆã£ã¦æ˜ç¤ºçš„ã«ã‚­ãƒ£ãƒƒãƒã•ã‚Œãªã„é™ã‚Šã€HTTP è¦æ±‚å…¨ä½“ãŒå¤±æ•—ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-244">Therefore, the entire HTTP request fails unless the exception is explicitly caught by developer code.</span></span>

<span data-ttu-id="b0e7c-245">é€šå¸¸ã®çŠ¶æ³ã§ã¯ã€äº‹å‰è¨­å®šã«å¤±æ•—ã—ãŸå ´åˆã«ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ“ãƒ«ãƒ‰ã¨ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’ç¶šè¡Œã—ã¦ã‚‚æ„å‘³ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã‚Œã¯ã€ä½œæ¥­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã§ããªã„ãŸã‚ã§ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-245">Under normal circumstances when prerendering fails, continuing to build and render the component doesn't make sense because a working component can't be rendered.</span></span>

<span data-ttu-id="b0e7c-246">ãƒ—ãƒªãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ä¸­ã«ç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã‚’è¨±å®¹ã™ã‚‹ã«ã¯ã€ä¾‹å¤–ã‚’ã‚¹ãƒ­ãƒ¼ã™ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã«ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯ã‚’é…ç½®ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-246">To tolerate errors that may occur during prerendering, error handling logic must be placed inside a component that may throw exceptions.</span></span> <span data-ttu-id="b0e7c-247">ã‚¨ãƒ©ãƒ¼å‡¦ç†ã¨ãƒ­ã‚°è¨˜éŒ²ã§ã¯ã€ [try-catch](/dotnet/csharp/language-reference/keywords/try-catch)ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-247">Use [try-catch](/dotnet/csharp/language-reference/keywords/try-catch) statements with error handling and logging.</span></span> <span data-ttu-id="b0e7c-248">`try-catch` ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã§ `Component` ã‚¿ã‚°ãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚’ãƒ©ãƒƒãƒ—ã™ã‚‹ã®ã§ã¯ãªãã€`Component` ã‚¿ã‚°ãƒ˜ãƒ«ãƒ‘ãƒ¼ã«ã‚ˆã£ã¦è¡¨ç¤ºã•ã‚Œã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯ã‚’é…ç½®ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-248">Instead of wrapping the `Component` Tag Helper in a `try-catch` statement, place error handling logic in the component rendered by the `Component` Tag Helper.</span></span>

## <a name="advanced-scenarios"></a><span data-ttu-id="b0e7c-249">é«˜åº¦ãªã‚·ãƒŠãƒªã‚ª</span><span class="sxs-lookup"><span data-stu-id="b0e7c-249">Advanced scenarios</span></span>

### <a name="recursive-rendering"></a><span data-ttu-id="b0e7c-250">å†å¸°çš„ãªãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°</span><span class="sxs-lookup"><span data-stu-id="b0e7c-250">Recursive rendering</span></span>

<span data-ttu-id="b0e7c-251">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯å†å¸°çš„ã«å…¥ã‚Œå­ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-251">Components can be nested recursively.</span></span> <span data-ttu-id="b0e7c-252">ã“ã‚Œã¯ã€å†å¸°çš„ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’è¡¨ã™å ´åˆã«ä¾¿åˆ©ã§ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-252">This is useful for representing recursive data structures.</span></span> <span data-ttu-id="b0e7c-253">ãŸã¨ãˆã°ã€`TreeNode` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã¯ã€ãƒãƒ¼ãƒ‰ã®å­ã”ã¨ã«ã‚ˆã‚Šå¤šãã® `TreeNode` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã§ãã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-253">For example, a `TreeNode` component can render more `TreeNode` components for each of the node's children.</span></span>

<span data-ttu-id="b0e7c-254">å†å¸°çš„ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹å ´åˆã¯ã€ç„¡é™å†å¸°ã«ãªã‚‹ã‚ˆã†ãªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é¿ã‘ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-254">When rendering recursively, avoid coding patterns that result in infinite recursion:</span></span>

* <span data-ttu-id="b0e7c-255">å¾ªç’°ã‚’å«ã‚€ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’å†å¸°çš„ã«è¡¨ç¤ºã™ã‚‹ã“ã¨ã¯é¿ã‘ã¦ãã ã•ã„ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-255">Don't recursively render a data structure that contains a cycle.</span></span> <span data-ttu-id="b0e7c-256">ãŸã¨ãˆã°ã€å­ã‚’å«ã‚€ãƒ„ãƒªãƒ¼ãƒãƒ¼ãƒ‰ã¯è¡¨ç¤ºã—ã¾ã›ã‚“ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-256">For example, don't render a tree node whose children includes itself.</span></span>
* <span data-ttu-id="b0e7c-257">å¾ªç’°ã‚’å«ã‚€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ãƒã‚§ãƒ¼ãƒ³ã‚’ä½œæˆã—ãªã„ã§ãã ã•ã„ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-257">Don't create a chain of layouts that contain a cycle.</span></span> <span data-ttu-id="b0e7c-258">ãŸã¨ãˆã°ã€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒãã‚Œè‡ªä½“ã§ã‚ã‚‹ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’ä½œæˆã—ãªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-258">For example, don't create a layout whose layout is itself.</span></span>
* <span data-ttu-id="b0e7c-259">æ‚ªæ„ã®ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ã¾ãŸã¯ JavaScript ã®ç›¸äº’é‹ç”¨å‘¼ã³å‡ºã—ã«ã‚ˆã£ã¦ã€ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå†å¸°ä¸å¤‰ (ãƒ«ãƒ¼ãƒ«) ã«é•åã—ãªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-259">Don't allow an end user to violate recursion invariants (rules) through malicious data entry or JavaScript interop calls.</span></span>

<span data-ttu-id="b0e7c-260">ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ä¸­ã®ç„¡é™ãƒ«ãƒ¼ãƒ—:</span><span class="sxs-lookup"><span data-stu-id="b0e7c-260">Infinite loops during rendering:</span></span>

* <span data-ttu-id="b0e7c-261">ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ—ãƒ­ã‚»ã‚¹ã‚’æ°¸ä¹…ã«ç¶šè¡Œã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-261">Causes the rendering process to continue forever.</span></span>
* <span data-ttu-id="b0e7c-262">ã¯ã€çµ‚äº†ã—ãªã„ãƒ«ãƒ¼ãƒ—ã‚’ä½œæˆã™ã‚‹ã®ã¨åŒã˜ã§ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-262">Is equivalent to creating an unterminated loop.</span></span>

<span data-ttu-id="b0e7c-263">ã“ã‚Œã‚‰ã®ã‚·ãƒŠãƒªã‚ªã§ã¯ã€å½±éŸ¿ã‚’å—ã‘ã‚‹å›ç·šãŒãƒãƒ³ã‚°ã—ã€ã‚¹ãƒ¬ãƒƒãƒ‰ã¯é€šå¸¸æ¬¡ã‚’è©¦è¡Œã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-263">In these scenarios, the affected circuit hangs, and the thread usually attempts to:</span></span>

* <span data-ttu-id="b0e7c-264">ã‚ªãƒšãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã§è¨±å¯ã•ã‚Œã¦ã„ã‚‹ CPU æ™‚é–“ã‚’ç„¡æœŸé™ã«ä½¿ç”¨ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-264">Consume as much CPU time as permitted by the operating system, indefinitely.</span></span>
* <span data-ttu-id="b0e7c-265">ç„¡åˆ¶é™ã®æ•°ã®ã‚µãƒ¼ãƒãƒ¼ãƒ¡ãƒ¢ãƒªã‚’æ¶ˆè²»ã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-265">Consume an unlimited amount of server memory.</span></span> <span data-ttu-id="b0e7c-266">ãƒ¡ãƒ¢ãƒªã‚’ç„¡åˆ¶é™ã«ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯ã€åå¾©å‡¦ç†ã®ãŸã³ã«çµ‚äº†ã—ãªã„ãƒ«ãƒ¼ãƒ—ã«ã‚ˆã£ã¦ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚¨ãƒ³ãƒˆãƒªãŒè¿½åŠ ã•ã‚Œã‚‹ã‚·ãƒŠãƒªã‚ªã¨åŒã˜ã§ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-266">Consuming unlimited memory is equivalent to the scenario where an unterminated loop adds entries to a collection on every iteration.</span></span>

<span data-ttu-id="b0e7c-267">ç„¡é™ã®å†å¸°ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å›é¿ã™ã‚‹ã«ã¯ã€å†å¸°çš„ãªãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚³ãƒ¼ãƒ‰ã«é©åˆ‡ãªåœæ­¢æ¡ä»¶ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-267">To avoid infinite recursion patterns, ensure that recursive rendering code contains suitable stopping conditions.</span></span>

### <a name="custom-render-tree-logic"></a><span data-ttu-id="b0e7c-268">ã‚«ã‚¹ã‚¿ãƒ ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ„ãƒªãƒ¼ã®ãƒ­ã‚¸ãƒƒã‚¯</span><span class="sxs-lookup"><span data-stu-id="b0e7c-268">Custom render tree logic</span></span>

<span data-ttu-id="b0e7c-269">ã»ã¨ã‚“ã©ã® Blazor ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€razor ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦å®Ÿè£…ã•ã‚Œã€`RenderTreeBuilder` ã‚’æ“ä½œã—ã¦å‡ºåŠ›ã‚’è¡¨ç¤ºã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚Œ*ã¾ã™ã€‚*</span><span class="sxs-lookup"><span data-stu-id="b0e7c-269">Most Blazor components are implemented as *.razor* files and are compiled to produce logic that operates on a `RenderTreeBuilder` to render their output.</span></span> <span data-ttu-id="b0e7c-270">é–‹ç™ºè€…ã¯ã€æ‰‹ç¶šãC#å‹ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ `RenderTreeBuilder` ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ‰‹å‹•ã§å®Ÿè£…ã§ãã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-270">A developer may manually implement `RenderTreeBuilder` logic using procedural C# code.</span></span> <span data-ttu-id="b0e7c-271">è©³ç´°ã«ã¤ã„ã¦ã¯ã€ã€Œ <xref:blazor/components#manual-rendertreebuilder-logic>ã€ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-271">For more information, see <xref:blazor/components#manual-rendertreebuilder-logic>.</span></span>

> [!WARNING]
> <span data-ttu-id="b0e7c-272">æ‰‹å‹•ã®ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ„ãƒªãƒ¼ãƒ“ãƒ«ãƒ€ãƒ¼ãƒ­ã‚¸ãƒƒã‚¯ã®ä½¿ç”¨ã¯ã€é«˜åº¦ã§å®‰å…¨ã§ã¯ãªã„ã‚·ãƒŠãƒªã‚ªã¨è¦‹ãªã•ã‚Œã¾ã™ã€‚ä¸€èˆ¬çš„ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é–‹ç™ºã«ã¯ãŠå‹§ã‚ã—ã¾ã›ã‚“ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-272">Use of manual render tree builder logic is considered an advanced and unsafe scenario, not recommended for general component development.</span></span>

<span data-ttu-id="b0e7c-273">`RenderTreeBuilder` ã‚³ãƒ¼ãƒ‰ãŒè¨˜è¿°ã•ã‚Œã¦ã„ã‚‹å ´åˆã€é–‹ç™ºè€…ã¯ã‚³ãƒ¼ãƒ‰ã®æ­£ç¢ºæ€§ã‚’ä¿è¨¼ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-273">If `RenderTreeBuilder` code is written, the developer must guarantee the correctness of the code.</span></span> <span data-ttu-id="b0e7c-274">ãŸã¨ãˆã°ã€é–‹ç™ºè€…ã¯æ¬¡ã®ã“ã¨ã‚’ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-274">For example, the developer must ensure that:</span></span>

* <span data-ttu-id="b0e7c-275">`OpenElement` ã¨ `CloseElement` ã®å‘¼ã³å‡ºã—ãŒæ­£ã—ãèª¿æ•´ã•ã‚Œã¦ã„ã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-275">Calls to `OpenElement` and `CloseElement` are correctly balanced.</span></span>
* <span data-ttu-id="b0e7c-276">å±æ€§ã¯æ­£ã—ã„å ´æ‰€ã«ã®ã¿è¿½åŠ ã•ã‚Œã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-276">Attributes are only added in the correct places.</span></span>

<span data-ttu-id="b0e7c-277">æ‰‹å‹•ã®ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ„ãƒªãƒ¼ãƒ“ãƒ«ãƒ€ãƒ¼ã®ãƒ­ã‚¸ãƒƒã‚¯ãŒæ­£ã—ããªã„ã¨ã€ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã€ã‚µãƒ¼ãƒãƒ¼ã®ãƒãƒ³ã‚°ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®è„†å¼±æ€§ãªã©ã€ä»»æ„ã®æœªå®šç¾©ã®å‹•ä½œãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-277">Incorrect manual render tree builder logic can cause arbitrary undefined behavior, including crashes, server hangs, and security vulnerabilities.</span></span>

<span data-ttu-id="b0e7c-278">ã‚¢ã‚»ãƒ³ãƒ–ãƒªã‚³ãƒ¼ãƒ‰ã¾ãŸã¯ MSIL å‘½ä»¤ã‚’æ‰‹ä½œæ¥­ã§è¨˜è¿°ã™ã‚‹ã®ã¨åŒã˜ãƒ¬ãƒ™ãƒ«ã®è¤‡é›‘ã•ã¨åŒã˜ãƒ¬ãƒ™ãƒ«ã®*å±é™º*ã‚’è€ƒæ…®ã—ã¦ã€æ‰‹å‹•ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ„ãƒªãƒ¼ãƒ“ãƒ«ãƒ€ãƒ¼ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚</span><span class="sxs-lookup"><span data-stu-id="b0e7c-278">Consider manual render tree builder logic on the same level of complexity and with the same level of *danger* as writing assembly code or MSIL instructions by hand.</span></span>
